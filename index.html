<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ìœ ì•„ìš© ì˜ì–´ ë‹¨ì–´ Â· 10ê°œì”© ë³´ê¸° + TTS (Pause/Resume ê³ ì •íŒ)</title>
  <style>
    :root{ --bg:#0b1020; --card:#121933; --text:#e8ecff; --sub:#a7b1d8; --accent:#7aa2ff; --muted:#2a335a; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Noto Sans KR,Apple SD Gothic Neo,sans-serif;background:linear-gradient(180deg,#0b1020 0%,#0f1730 100%);color:var(--text)}
    .wrap{max-width:1100px;margin:0 auto;padding:20px}
    header{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:20;background:linear-gradient(180deg,#0b1020 0%,#0f1730 100%);border-bottom:1px solid #1b2550;padding:12px 20px}
    .brand{font-weight:800;letter-spacing:.2px}
    .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    select,button,input[type="range"]{background:var(--card);color:var(--text);border:1px solid var(--muted);border-radius:14px;padding:10px 12px}
    select:focus,button:focus{outline:2px solid var(--accent)}
    button{cursor:pointer;transition:transform .02s ease, background .2s ease;min-height:40px;min-width:40px;-webkit-tap-highlight-color:transparent}
    button:active{transform:translateY(1px)}
    .grid{display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-top:16px}
    .card{background:var(--card);border:1px solid var(--muted);border-radius:16px;padding:8px;display:flex;flex-direction:column;gap:8px;min-height:80px}
    .en{font-size:18px;font-weight:800;line-height:1.2}
    .ko{font-size:14px;color:var(--sub)}
    .tts{display:flex;gap:6px}
    .tts button{font-size:12px;min-height:36px;padding:6px 10px;border-radius:10px}
    .footer{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-top:16px}
    .pager{display:flex;gap:8px}
    .hint{color:var(--sub);font-size:14px}
    .badge{background:var(--muted);color:#d7defc;padding:4px 10px;border-radius:999px;font-size:12px}
    .bar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:8px}
    @media (max-width:1120px){ .grid{grid-template-columns:repeat(4,1fr)} }
    @media (max-width:820px){ .grid{grid-template-columns:repeat(3,1fr)} }
    @media (max-width:480px){ .grid{grid-template-columns:repeat(2,1fr)} }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div style="font-size:18px;opacity:.8">ìœ ì•„ìš© ì˜ì–´ ë‹¨ì–´</div>
        <div style="font-size:24px">10ê°œì”© ë³´ê¸° Â· ë“£ê¸°(TTS)</div>
      </div>
      <div class="controls">
        <label class="badge">ì¹´í…Œê³ ë¦¬ 50ë‹¨ì–´</label>
        <select id="category"></select>
        <button id="shuffleBtn">ğŸ”€ ì„ê¸°</button>
        <button id="playAllBtn">â–¶ ì „ì²´ ì¬ìƒ(ì¹´í…Œê³ ë¦¬)</button>
        <button id="pauseBtn">â¯ ì¬ìƒ/ì¼ì‹œì •ì§€</button>
        <button id="stopBtn">â¹ ì •ì§€</button>
      </div>
    </header>

    <div class="bar">
      <span class="badge">ì½ê¸° ì†ë„</span>
      <input id="rate" type="range" min="0.6" max="1.4" step="0.1" value="1" />
      <span id="rateVal">1.0x</span>
      <span class="hint">ì˜ì–´ â–¶ í•œêµ­ì–´ ìˆœì„œë¡œ ì½ì–´ìš”</span>
    </div>

    <div id="grid" class="grid" role="list" aria-live="polite"></div>

    <div class="footer">
      <div class="pager">
        <button id="prevBtn">â—€ ì´ì „ 10ê°œ</button>
        <button id="nextBtn">ë‹¤ìŒ 10ê°œ â–¶</button>
      </div>
      <div><span id="pageInfo" class="badge">- / -</span></div>
    </div>
  </div>

  <script>
    // ====== ë°ì´í„° (ìƒ˜í”Œ: 3 ì¹´í…Œê³ ë¦¬/ê° 50ê°œ) ======
    const WORDS = {
      "ë™ë¬¼": [["cat","ê³ ì–‘ì´"],["dog","ê°œ"],["bird","ìƒˆ"],["fish","ë¬¼ê³ ê¸°"],["rabbit","í† ë¼"],
        ["horse","ë§"],["cow","ì†Œ"],["pig","ë¼ì§€"],["sheep","ì–‘"],["goat","ì—¼ì†Œ"],
        ["chicken","ë‹­"],["duck","ì˜¤ë¦¬"],["goose","ê±°ìœ„"],["turkey","ì¹ ë©´ì¡°"],["deer","ì‚¬ìŠ´"],
        ["bear","ê³°"],["lion","ì‚¬ì"],["tiger","í˜¸ë‘ì´"],["elephant","ì½”ë¼ë¦¬"],["giraffe","ê¸°ë¦°"],
        ["monkey","ì›ìˆ­ì´"],["panda","íŒë‹¤"],["zebra","ì–¼ë£©ë§"],["kangaroo","ìº¥ê±°ë£¨"],["koala","ì½”ì•Œë¼"],
        ["fox","ì—¬ìš°"],["wolf","ëŠ‘ëŒ€"],["dolphin","ëŒê³ ë˜"],["whale","ê³ ë˜"],["shark","ìƒì–´"],
        ["penguin","í­ê·„"],["seal","ë¬¼ê°œ"],["turtle","ê±°ë¶ì´"],["frog","ê°œêµ¬ë¦¬"],["snake","ë±€"],
        ["crocodile","ì•…ì–´"],["hippo","í•˜ë§ˆ"],["rhino","ì½”ë¿”ì†Œ"],["camel","ë‚™íƒ€"],["donkey","ë‹¹ë‚˜ê·€"],
        ["mouse","ìƒì¥"],["rat","ì¥"],["squirrel","ë‹¤ëŒì¥"],["bat","ë°•ì¥"],["owl","ì˜¬ë¹¼ë¯¸"],
        ["eagle","ë…ìˆ˜ë¦¬"],["bee","ë²Œ"],["ant","ê°œë¯¸"],["butterfly","ë‚˜ë¹„"],["spider","ê±°ë¯¸"]],
      "ë‚ ì”¨": [["sun","í•´"],["sunny","ë§‘ì€"],["cloud","êµ¬ë¦„"],["cloudy","íë¦°"],["rain","ë¹„"],
        ["rainy","ë¹„ ì˜¤ëŠ”"],["drizzle","ì´ìŠ¬ë¹„"],["shower","ì†Œë‚˜ê¸°"],["thunder","ì²œë‘¥"],["lightning","ë²ˆê°œ"],
        ["thunderstorm","ë‡Œìš°"],["storm","í­í’"],["typhoon","íƒœí’"],["hurricane","í—ˆë¦¬ì¼€ì¸"],["wind","ë°”ëŒ"],
        ["windy","ë°”ëŒ ë¶€ëŠ”"],["breeze","ì‚°ë“¤ë°”ëŒ"],["gale","ê°•í’"],["snow","ëˆˆ"],["snowy","ëˆˆ ì˜¤ëŠ”"],
        ["sleet","ì§„ëˆˆê¹¨ë¹„"],["hail","ìš°ë°•"],["mist","ì˜…ì€ ì•ˆê°œ"],["fog","ì•ˆê°œ"],["foggy","ì•ˆê°œ ë‚€"],
        ["rainbow","ë¬´ì§€ê°œ"],["temperature","ê¸°ì˜¨"],["hot","ë”ìš´"],["warm","ë”°ëœ»í•œ"],["cool","ì„œëŠ˜í•œ"],
        ["cold","ì¶”ìš´"],["freeze","ì–¼ë‹¤"],["freezing","ì˜í•˜ì˜"],["frost","ì„œë¦¬"],["icy","ì–¼ìŒ ë‚€"],
        ["humid","ìŠµí•œ"],["humidity","ìŠµë„"],["dry","ê±´ì¡°í•œ"],["drought","ê°€ë­„"],["flood","í™ìˆ˜"],
        ["overcast","íšŒìƒ‰ êµ¬ë¦„ ë‚€"],["clear","ì¾Œì²­í•œ"],["sprinkle","ê°€ë‘ë¹„"],["blizzard","ëˆˆë³´ë¼"],["heatwave","í­ì—¼"],
        ["snowfall","ê°•ì„¤"],["raindrop","ë¹—ë°©ìš¸"],["dew","ì´ìŠ¬"],["puddle","ë¬¼ì›…ë©ì´"],["forecast","ì¼ê¸°ì˜ˆë³´"]],
      "ìˆ«ì": Array.from({length:50}, (_,i)=>{
        const en=["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty-one","twenty-two","twenty-three","twenty-four","twenty-five","twenty-six","twenty-seven","twenty-eight","twenty-nine","thirty","thirty-one","thirty-two","thirty-three","thirty-four","thirty-five","thirty-six","thirty-seven","thirty-eight","thirty-nine","forty","forty-one","forty-two","forty-three","forty-four","forty-five","forty-six","forty-seven","forty-eight","forty-nine","fifty"];
        const ko=["í•˜ë‚˜","ë‘˜","ì…‹","ë„·","ë‹¤ì„¯","ì—¬ì„¯","ì¼ê³±","ì—¬ëŸ","ì•„í™‰","ì—´","ì—´í•˜ë‚˜","ì—´ë‘˜","ì—´ì…‹","ì—´ë„·","ì—´ë‹¤ì„¯","ì—´ì—¬ì„¯","ì—´ì¼ê³±","ì—´ì—¬ëŸ","ì—´ì•„í™‰","ìŠ¤ë¬´","ìŠ¤ë¬¼í•˜ë‚˜","ìŠ¤ë¬¼ë‘˜","ìŠ¤ë¬¼ì…‹","ìŠ¤ë¬¼ë„·","ìŠ¤ë¬¼ë‹¤ì„¯","ìŠ¤ë¬¼ì—¬ì„¯","ìŠ¤ë¬¼ì¼ê³±","ìŠ¤ë¬¼ì—¬ëŸ","ìŠ¤ë¬¼ì•„í™‰","ì„œë¥¸","ì„œë¥¸í•˜ë‚˜","ì„œë¥¸ë‘˜","ì„œë¥¸ì…‹","ì„œë¥¸ë„·","ì„œë¥¸ë‹¤ì„¯","ì„œë¥¸ì—¬ì„¯","ì„œë¥¸ì¼ê³±","ì„œë¥¸ì—¬ëŸ","ì„œë¥¸ì•„í™‰","ë§ˆí”","ë§ˆí”í•˜ë‚˜","ë§ˆí”ë‘˜","ë§ˆí”ì…‹","ë§ˆí”ë„·","ë§ˆí”ë‹¤ì„¯","ë§ˆí”ì—¬ì„¯","ë§ˆí”ì¼ê³±","ë§ˆí”ì—¬ëŸ","ë§ˆí”ì•„í™‰","ì‰°"];
        return [en[i], ko[i]];
      })
    };

    // ====== ìƒíƒœ ======
    const $ = (id)=>document.getElementById(id);
    const categorySel=$('category'), grid=$('grid'), pageInfo=$('pageInfo');
    const nextBtn=$('nextBtn'), prevBtn=$('prevBtn');
    const shuffleBtn=$('shuffleBtn'), playAllBtn=$('playAllBtn'), pauseBtn=$('pauseBtn'), stopBtn=$('stopBtn');
    const rateEl=$('rate'), rateVal=$('rateVal');

    let currentCategory = Object.keys(WORDS)[0];
    let order = [...Array(WORDS[currentCategory].length).keys()];
    let page = 0;

    // ì¬ìƒ ìƒíƒœ
    let playQueue = [];
    let isPlaying = false;
    let isPaused = false;   // â˜… ë…¼ë¦¬ì  ì¼ì‹œì •ì§€ í”Œë˜ê·¸
    let lastMode = 'all';   // 'all' | 'page' â€” ì¬ê°œ ì‹œ ì–´ë–¤ íë¥¼ ë§Œë“¤ì§€ ê¸°ì–µ

    // ====== TTS ê°€ë“œ ======
    const hasTTS = ('speechSynthesis' in window) && (typeof window.SpeechSynthesisUtterance !== 'undefined');
    function synth(){ return hasTTS ? window.speechSynthesis : null; }

    let voices = [];
    function refreshVoices(){ try{ const s=synth(); voices = s && s.getVoices ? s.getVoices() : []; }catch(_){ voices=[]; } }
    refreshVoices(); if(hasTTS && synth()) synth().onvoiceschanged = refreshVoices;

    function pickVoice(lang){ if(!voices.length) return null; const v=voices.find(v=>v.lang && v.lang.toLowerCase().startsWith(lang)); return v||voices[0]; }

    function enqueuePair(en,ko){ playQueue.push({text:en,lang:'en'},{text:ko,lang:'ko'}); }
    function buildCategoryQueue(){ playQueue=[]; WORDS[currentCategory].forEach(([en,ko])=>enqueuePair(en,ko)); lastMode='all'; return playQueue.length; }
    function buildPageQueue(){ playQueue=[]; const start=page*10; const list=WORDS[currentCategory]; order.slice(start,start+10).forEach(i=>{ const [en,ko]=list[i]; enqueuePair(en,ko); }); lastMode='page'; return playQueue.length; }

    function startQueue(){
      if(playQueue.length===0){ isPlaying=false; updateControls(); return; }
      const s = synth(); if(!s){ isPlaying=false; playQueue=[]; updateControls(); return; }
      isPlaying = true;
      const {text,lang} = playQueue.shift();
      const u = new SpeechSynthesisUtterance(text); const v=pickVoice(lang); if(v) u.voice=v;
      u.lang=(lang==='en'?'en-US':'ko-KR'); u.rate=parseFloat(rateEl.value||'1');
      u.onend = ()=> setTimeout(()=>{
        if(!isPlaying || isPaused){ updateControls(); return; } // â˜… pause ì¤‘ì´ë©´ ì§„í–‰ ì¤‘ë‹¨
        if(playQueue.length>0) startQueue(); else { isPlaying=false; updateControls(); }
      },120);
      s.speak(u);
      updateControls();
    }

    function stopAll(){ try{ const s=synth(); if(s) s.cancel(); }catch(_){}
      isPlaying=false; isPaused=false; playQueue=[]; updateControls(); }

    function updateControls(){
      const s = synth();
      if(!s){ pauseBtn.textContent='â–¶ ì¬ìƒ'; return; }
      pauseBtn.textContent = (isPaused ? 'â–¶ ì¬ê°œ' : (s.speaking ? 'â¸ ì¼ì‹œì •ì§€' : 'â–¶ ì¬ìƒ'));
    }

    // ====== UI ë Œë” ======
    function renderOptions(){
      categorySel.innerHTML = Object.keys(WORDS).map(k=>`<option value="${k}">${k}</option>`).join('');
      categorySel.value = currentCategory;
    }
    function render(){
      const list = WORDS[currentCategory]; const start = page*10; const slice = order.slice(start,start+10);
      grid.innerHTML='';
      slice.forEach(i=>{
        const [en,ko]=list[i];
        const card=document.createElement('div'); card.className='card';
        const enEl=document.createElement('div'); enEl.className='en'; enEl.textContent=en;
        const koEl=document.createElement('div'); koEl.className='ko'; koEl.textContent=ko;
        const tts=document.createElement('div'); tts.className='tts';
        const b1=document.createElement('button'); b1.textContent='â–¶ EN'; b1.addEventListener('click',()=>{ const s=synth(); if(s && (s.speaking||s.paused)) return; /* ê²¹ì¹¨ ë°©ì§€ */ speak(en,'en'); });
        const b2=document.createElement('button'); b2.textContent='â–¶ KO'; b2.addEventListener('click',()=>{ const s=synth(); if(s && (s.speaking||s.paused)) return; speak(ko,'ko'); });
        tts.appendChild(b1); tts.appendChild(b2);
        card.appendChild(enEl); card.appendChild(koEl); card.appendChild(tts);
        grid.appendChild(card);
      });
      const totalPages=Math.ceil(order.length/10); pageInfo.textContent=`${page+1} / ${totalPages}`;
    }

    function speak(text,lang){
      try{
        const s=synth(); if(!s) return;
        const u=new SpeechSynthesisUtterance(text); const v=pickVoice(lang); if(v) u.voice=v;
        u.lang=(lang==='en'?'en-US':'ko-KR'); u.rate=parseFloat(rateEl.value||'1'); s.speak(u);
      }catch(_){}
    }

    // ====== ì´ë²¤íŠ¸ ======
    categorySel.addEventListener('change', ()=>{ currentCategory=categorySel.value; order=[...Array(WORDS[currentCategory].length).keys()]; page=0; stopAll(); render(); });
    nextBtn.addEventListener('click', ()=>{ const tp=Math.ceil(order.length/10); page=(page+1)%tp; stopAll(); render(); });
    prevBtn.addEventListener('click', ()=>{ const tp=Math.ceil(order.length/10); page=(page-1+tp)%tp; stopAll(); render(); });
    shuffleBtn.addEventListener('click', ()=>{ for(let i=order.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [order[i],order[j]]=[order[j],order[i]]; } page=0; stopAll(); render(); });
    rateEl.addEventListener('input', ()=>{ rateVal.textContent=(parseFloat(rateEl.value)||1).toFixed(1)+'x'; });

    playAllBtn.addEventListener('click', ()=>{ stopAll(); buildCategoryQueue(); isPaused=false; startQueue(); });

    // â˜… í•µì‹¬: ë…¼ë¦¬ ì¼ì‹œì •ì§€ â€” cancel()ë¡œ ì¦‰ì‹œ ë©ˆì¶”ê³ , íëŠ” ìœ ì§€ â†’ ì¬ê°œ ì‹œ startQueue()
    pauseBtn.addEventListener('click', ()=>{
      const s=synth(); if(!s) return;
      if(!isPaused){ // ì¼ì‹œì •ì§€ ìš”ì²­
        isPaused = true;
        try{ s.cancel(); }catch(_){}
      }else{ // ì¬ê°œ
        isPaused = false;
        if(playQueue.length===0){
          // íê°€ ë¹„ì—ˆìœ¼ë©´ ë§ˆì§€ë§‰ ëª¨ë“œ ê¸°ì¤€ìœ¼ë¡œ ì¬êµ¬ì„±
          if(lastMode==='page') buildPageQueue(); else buildCategoryQueue();
        }
        startQueue();
      }
      updateControls();
    });

    stopBtn.addEventListener('click', stopAll);

    // ì´ˆê¸°í™”
    (function init(){
      renderOptions(); render(); updateControls();
    })();
  </script>
</body>
</html>
